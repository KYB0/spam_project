<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spam9700.spam.dao.MemberDao">
    
    
    <!-- join -->
    <insert id="join" parameterType="com.spam9700.spam.dto.CustomerMemberDto">
        INSERT INTO customer_member (customer_id, customer_pwd, customer_name, customer_email, customer_birth, customer_phone)
        VALUES (#{customer_id}, #{customer_pwd}, #{customer_name}, #{customer_email}, #{customer_birth}, #{customer_phone})
    </insert>

    <!-- login -->

    <select id="iLogin" resultType="boolean">
        SELECT COUNT(*) FROM customer_member
        WHERE customer_id = #{customer_id} AND customer_pwd = #{customer_pwd}
    </select>

    <select id="cLogin" resultType="boolean">
         SELECT COUNT(*) FROM company_member
         WHERE company_id = #{company_id} AND company_pwd = #{company_pwd} AND company_businessnum = #{company_businessnum}
    </select>

    <!-- idCheck -->

    <select id="idCheck" resultType="boolean">
        SELECT COUNT(*) 
        FROM customer_member
        WHERE customer_id = #{customer_id}
    </select>


    <!-- findId -->

    <select id="findId" parameterType="map">
        SELECT customer_id
        FROM customer_member
        WHERE customer_name = #{customer_name}
        AND customer_email = #{customer_email}
    </select>

    <!-- findPwd -->

    <select id="findPwd">
        SELECT customer_pwd
        FROM customer_member
        WHERE customer_id = #{customer_id}
        AND customer_email = #{customer_email}
    </select>

    <!-- cLogin -->


    <!-- mypage update -->

    <!-- <update id="updateCustomerInfo" parameterType="CustomerMemberDto">
        UPDATE customer_member
        SET customer_pwd = #{customer_pwd},
            customer_phone = #{customer_phone},
            customer_email = #{customer_email}
        WHERE customer_id = #{customer_id}
    </update> -->

    <update id="updateMypage" parameterType="CustomerMemberDto">
        UPDATE customer_member
        SET
        customer_name = #{customer_name},
        customer_email = #{customer_email},
        customer_phone = #{customer_phone}
        WHERE customer_id = #{customer_id}
    </update>

    <select id="getCustomerInfoById"  resultType="CustomerMemberDto">
        SELECT * FROM customer_member 
        WHERE customer_id = #{customer_id}
    </select>

    <delete id="deleteMemberInfo" parameterType="String">
        DELETE FROM customer_member
        WHERE customer_id = #{customer_id}
    </delete>

</mapper>
