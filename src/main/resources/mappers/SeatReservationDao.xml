<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spam9700.spam.dao.SeatReservationDao">

    <!-- insertReservation 매핑 -->
    <insert id="saveReservation" parameterType="com.spam9700.spam.dto.ReservationDto">
        INSERT INTO seat_reservations (
            customer_id,
            seat_number,
            start_time,
            end_time,
            room_id,
            status
            
        )
        VALUES (
            #{customer_id},
            #{seat_number},
             #{start_time},
            #{end_time},
            #{room_id},
            '1'        
        )
    </insert>

<!-- //아이디 존재여부 확인 -->
<select id="checkCustomerIdExistence" resultType="int">
    SELECT 1
    FROM customer_member
    WHERE customer_id = #{customer_id}
</select>

<!-- 좌석 존재여부 확인 -->
<select id="checkSeatNumberExistence" resultType="int" parameterType="String">
    SELECT COUNT(*) FROM seats WHERE seat_number LIKE CONCAT('%', #{seatNumber}, '%') AND room_id = #{roomId}
</select>

<!-- //스터디룸 존재여부 확인 -->
<select id="checkRoomIdExistence" resultType="int">
    SELECT 1
    FROM study_room
    WHERE room_id = #{room_id}
</select>


</mapper>
